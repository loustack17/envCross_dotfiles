/* Zen Mods - Generated by ZenMods.
* FILE GENERATED AT: Monday, December 22, 2025 at 12:50:06 AM Eastern Standard Time
* DO NOT EDIT THIS FILE DIRECTLY!
* Your changes will be overwritten.
* Instead, go to the preferences and edit the mods there.
*/

/* Name: Audio Indicator Enhanced */
/* Description: Enhanced audio indicator, with more polished style (New Visualizer Mode) */
/* Author: @Kaedriz */
/** Globals styles, regardless of mode */

/* Remove native audio indicator button */
.tab-audio-button {
	display: none !important;
}

/* Resizes the glance tab indicator on essential tabs */
#navigator-toolbox
	#tabbrowser-tabs[orient="vertical"]
	.tabbrowser-tab[zen-essential="true"]
	.tabbrowser-tab[zen-glance-tab="true"] {
	--tab-collapsed-width: 24px !important;
	--tab-min-width: 16px !important;

	& .tab-icon-stack {
		align-content: center;
	}
}

/* Centers & resizes the glance tab indicator, to be more cohesive across essential & pinned tabs */
#navigator-toolbox
	#tabbrowser-tabs[orient="vertical"]
	.tabbrowser-tab[zen-glance-tab="true"] {
	& .tab-content {
		padding: 0px !important;
	}

	& .tab-icon-stack {
		height: var(--tab-min-height, 24px) !important;
		width: var(--tab-min-width, 24px) !important;

		& .tab-icon-image,
		.tab-throbber {
			place-self: center;
		}
	}
}

/* Centers the tab icon on essential tabs */
#navigator-toolbox
	#tabbrowser-tabs[orient="vertical"]
	.tabbrowser-tab[zen-essential="true"] {
	& .tab-icon-image,
	.tab-throbber {
		justify-self: center;
	}
}

/** Legacy Mode - Round circle */
@media not (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.audioWave.enabled") {
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab:not([zen-glance-tab])
		> .tab-stack
		> .tab-content
		> .tab-icon-stack
		> .tab-icon-overlay:not([crashed]) {
		&:is([soundplaying], [muted], [activemedia-blocked]) {
			display: flex !important;
			background-color: #161717 !important;
			border: 1px solid #ffffff29 !important;
			transition: transform 100ms ease-in-out,
				background-color 100ms ease-in-out;
			background-repeat: no-repeat !important;
			background-position: center !important;

			@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.hoverScaleAnimationEnabled") {
				&:hover {
					transition: transform 100ms ease-in-out,
						background-color 100ms ease-in-out !important;
					transform: scale(1.3) translate(-8%, 14%);
					transform-origin: center !important;
				}
			}
		}

		&[soundplaying] {
			/* Revert old icon */
			@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.returnOldIcons") {
				@media not (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
					background-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg") !important;
				}

				@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
					background-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg") !important;
				}
			}
		}

		&[muted] {
			/* Different background color when muted */
			background-color: rgb(122, 31, 31) !important;

			/* Revert old icon */
			@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.returnOldIcons") {
				@media not (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
					background-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg") !important;
				}

				@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
					background-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg") !important;
				}
			}
		}

		&[activemedia-blocked] {
			/* Revert old icon */
			@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.returnOldIcons") {
				background-image: url("chrome://browser/skin/tabbrowser/tab-audio-blocked-small.svg") !important;
			}
		}

		/* Revert new, zen's audio indicator */
		@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.returnOldIcons") {
			&[muted],
			&[soundplaying],
			&[activemedia-blocked] {
				list-style-image: none !important;
			}
		}
	}

	/* Patches for essential tabs indicator */
	#navigator-toolbox[zen-sidebar-expanded="true"]
		#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[zen-essential="true"]
		.tab-icon-stack {
		width: 100% !important;
		height: 100% !important;

		& .tab-icon-image,
		.tab-throbber {
			place-self: center;
		}

		/* Some stylistic changes for essential tabs indicator */
		& .tab-icon-overlay:not([crashed]) {
			width: 24px !important;
			height: 24px !important;
			margin: 5px !important;

			background-color: hsl(180, 2%, 9%, 50%) !important;
			border: 1px solid hsla(0, 0%, 100%, 3%) !important;
			background-size: 65% !important;
			border-radius: 7px !important;
			transform-origin: top right !important;

			&[muted] {
				background-color: hsl(0, 59%, 30%, 50%) !important;
			}

			@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.hoverScaleAnimationEnabled") {
				&:hover {
					transform: scale(1.2);
				}
			}
		}
	}

	/* Patches for pinned tabs indicator while in SuperPins */
	@media (-moz-bool-pref: "uc.pins.legacy-layout") {
		#navigator-toolbox[zen-sidebar-expanded="true"]
			#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab[pinned]
			.tab-icon-stack {
			width: 100% !important;
			height: 100% !important;

			& .tab-icon-image,
			.tab-throbber {
				place-self: center;
			}

			/* Some stylistic changes for essential tabs indicator */
			& .tab-icon-overlay:not([crashed]) {
				width: 24px !important;
				height: 24px !important;
				margin: 5px !important;

				background-color: hsl(180, 2%, 9%, 50%) !important;
				border: 1px solid hsla(0, 0%, 100%, 10%) !important;
				background-size: 75% !important;
				border-radius: 7px !important;
				transform-origin: top right !important;

				&[muted] {
					background-color: hsl(0, 59%, 30%, 50%) !important;
				}

				@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.hoverScaleAnimationEnabled") {
					&:hover {
						transform: scale(1.2);
					}
				}
			}
		}

		/* Change positioning of indicator on essential tabs */
		#navigator-toolbox[zen-sidebar-expanded="true"]
			#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab[pinned] {
			--tab-inline-padding: 0px !important;

			& .tab-icon-overlay:not([crashed]) {
				/* position: absolute !important; */
				top: 0px !important;
				right: 0px !important;
				margin: 4px !important;
				place-self: start end;
			}
		}
	}

	/* Change positioning of indicator on essential tabs */
	#navigator-toolbox[zen-sidebar-expanded="true"]
		#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[zen-essential="true"] {
		--tab-inline-padding: 0px !important;

		& .tab-icon-overlay:not([crashed]) {
			/* position: absolute !important; */
			top: 0px !important;
			right: 0px !important;
			margin: 4px !important;
			place-self: start end;
		}
	}

	/* Large Essential Icons Mode */
	@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.bigEssentialIcons.enabled") {
		#navigator-toolbox
			#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab[zen-essential="true"] {
			& .tab-icon-image {
				width: 32px !important;
				height: 32px !important;
			}
		}
	}
}

/* Standardize tab icon size, to prevent size flexing */
#navigator-toolbox[zen-sidebar-expanded="true"]
	#tabbrowser-tabs[orient="vertical"]
	.tabbrowser-tab
	.tab-icon-stack {
	height: 16px;
	width: 28.5px;
}

/** Audio Wave version */
@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.audioWave.enabled") {
	/** Variables section */
	/* Normal tab bar */
	#tabbrowser-tabs[orient="vertical"] {
		/* Normal tab */
		& .tabbrowser-tab {
			--audio-button-top: -4px;
			--audio-button-left: -3px;
			--audio-wave-top: 0px;
			--audio-wave-left: 0px;
			--audio-wave-height: 17px;
		}

		/* Patch for SuperPins */
		@media (-moz-bool-pref: "uc.pins.legacy-layout") {
			/* Pinned tab */
			& .tabbrowser-tab[pinned] {
				--audio-button-top: -4px;
				--audio-button-left: 0px;
				--audio-wave-top: -6px;
				--audio-wave-left: 0px;
			}
		}

		/* Essential tab */
		& .tabbrowser-tab[zen-essential="true"] {
			--audio-button-top: -4px;
			--audio-button-left: 0px;
			--audio-wave-top: -4px;
			--audio-wave-left: 0px;
		}
	}

	/* Collapsed tab bar */
	#navigator-toolbox:not([zen-sidebar-expanded="true"])
		#tabbrowser-tabs[orient="vertical"] {
		/* Normal tab */
		& .tabbrowser-tab {
			--audio-button-top: 0px;
			--audio-button-left: 6px;
			--audio-wave-top: 4px;
			--audio-wave-left: -6px;
		}

		/* Patch for SuperPins */
		@media (-moz-bool-pref: "uc.pins.legacy-layout") {
			/* Pinned tab */
			& .tabbrowser-tab[pinned] {
				--audio-button-top: 0px;
				--audio-button-left: 0px;
				--audio-wave-top: -2px;
				--audio-wave-left: -6px;
			}
		}

		/* Essential tab */
		& .tabbrowser-tab[zen-essential="true"] {
			/* These 2 could be deleted, as are inherited */
			--audio-button-top: 0px;
			--audio-button-left: 0px;
			--audio-wave-top: 4px;
			--audio-wave-left: -6px;
		}
	}

	/* Split tabs */
	#tabbrowser-tabs[orient="vertical"] tab-group[split-view-group="true"] {
		/* Normal tab */
		& .tabbrowser-tab {
			--audio-wave-top: 4px;
			--audio-wave-left: 0px;
		}

		/* Patch for SuperPins */
		@media (-moz-bool-pref: "uc.pins.legacy-layout") {
			/* Pinned tab */
			& .tabbrowser-tab[pinned] {
				--audio-wave-top: -2px;
				--audio-wave-left: 0px;
			}
		}
	}

	/* Collapsed tab bar & Split tabs */
	#navigator-toolbox:not([zen-sidebar-expanded="true"]) {
		#tabbrowser-tabs[orient="vertical"] tab-group[split-view-group="true"] {
			/* Normal tab */
			& .tabbrowser-tab {
				--audio-button-left: 0px;
				--audio-wave-top: 7px;
				--audio-wave-left: 0px;
			}

			/* Patch for SuperPins */
			@media (-moz-bool-pref: "uc.pins.legacy-layout") {
				/* Pinned tab */
				& .tabbrowser-tab[pinned] {
					--audio-wave-top: 1px;
					--audio-wave-left: -6px;
				}
			}
		}
	}

	/* Some styling for mute/unmute audio button */
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab
		.tab-icon-overlay:not([crashed]) {
		top: var(--audio-button-top, 0px) !important;
		left: var(--audio-button-left, 0px) !important;
		width: 24px !important;
		height: 24px !important;

		padding: 5px !important;
		border-radius: 6px !important;
		display: initial !important;

		opacity: 0;
		visibility: hidden;
	}

	/* Centers the tab icon, when collapsed tab bar */
	#navigator-toolbox:not([zen-sidebar-expanded="true"])
		#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab {
		& .tab-icon-image,
		.tab-throbber {
			place-self: center;
		}
	}

	/* Tab Icon to mute playing audio */
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[soundplaying]:not([zen-glance-tab]):hover
		> .tab-stack
		> .tab-content
		> .tab-icon-stack
		> .tab-icon-overlay:not([crashed]) {
		@media not (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
			list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg") !important;
		}

		@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
			list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg") !important;
		}
	}

	/* Tab Icon to unmute muted audio */
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[muted]:not([zen-glance-tab]):hover
		> .tab-stack
		> .tab-content
		> .tab-icon-stack
		> .tab-icon-overlay:not([crashed]) {
		@media not (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
			list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-muted-small.svg") !important;
		}

		@media (-moz-bool-pref: "zen.mods.AudioIndicatorEnhanced.reverseAudioIcons") {
			list-style-image: url("chrome://browser/skin/tabbrowser/tab-audio-playing-small.svg") !important;
		}
	}

	/* Show button to mute/unmute audio, on hover, in place of tab icon */
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab:has([soundplaying], [muted]):not(
			[zen-glance-tab]
		):hover {
		&
			> .tab-stack
			> .tab-content
			> .tab-icon-stack
			> .tab-icon-overlay:not([crashed]) {
			display: flex !important;
			opacity: 1;
			visibility: visible;

			background-color: transparent !important;

			&:hover {
				background-color: color-mix(
					in srgb,
					currentColor 10%,
					transparent
				) !important;
			}
		}

		& > .tab-stack > .tab-content > .tab-icon-stack > .tab-icon-image {
			opacity: 0 !important;
		}
	}

	/* Patches for SuperPins compatibility */
	@media (-moz-bool-pref: "uc.pins.legacy-layout") {
		/* Patch for pinned tabs with SuperPins */
		#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab[pinned]
			.tab-icon-stack {
			width: 100% !important;
			justify-content: center;

			&::before {
				/* TODO: Take padding from variable */
				width: calc(100% + 12px) !important;
			}

			& .tab-icon-image {
				justify-self: center !important;
			}
		}

		#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab[pinned]:not([zen-essential="true"])
			.tab-icon-stack::before {
			bottom: 6px !important;
		}

		.tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-content {
			border-radius: var(--border-radius-medium) !important;
		}

		/* Patch for collapsed pinned tabs with SuperPins  */
		#navigator-toolbox:not([zen-sidebar-expanded="true"])
			#tabbrowser-tabs[orient="vertical"]
			.tabbrowser-tab
			.tab-icon-stack {
			width: var(--tab-collapsed-background-width) !important;

			&::before {
				width: var(--tab-collapsed-background-width) !important;
			}
		}
	}

	/* Patch for essential tabs */
	#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[zen-essential="true"]
		.tab-icon-stack {
		width: 100% !important;
		justify-content: center;

		&::before {
			/* TODO: Take padding from variable */
			width: calc(100% + 10px) !important;
		}
	}

	/* Patch for collapsed essential tabs */
	#navigator-toolbox:not([zen-sidebar-expanded="true"])
		#tabbrowser-tabs[orient="vertical"]
		.tabbrowser-tab[zen-essential="true"]
		.tab-icon-stack {
		width: var(--tab-collapsed-background-width) !important;

		&::before {
			width: var(--tab-collapsed-background-width) !important;
		}
	}

	/* Code for audio wave */
	.tabbrowser-tab:not([zen-glance-tab])
		> .tab-stack
		> .tab-content
		> .tab-icon-stack::before {
		content: "" !important;
		z-index: -1 !important;
		position: absolute !important;
		bottom: 0;
		left: 0;
		width: calc(var(--zen-sidebar-width) - 9px) !important;
		height: var(--audio-wave-height) !important;
		transform: translate(
			calc(-6px - var(--audio-wave-left)),
			calc(10px - var(--audio-wave-top))
		) !important;
		transform-origin: bottom;
		border-radius: 20px !important;
		opacity: 0;

		-moz-context-properties: fill, fill-opacity;
		background-size: 492px 100% !important;
		background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3Csvg width='1000' height='120' viewBox='0 0 1000 120' preserveAspectRatio='none' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1000' height='120' /%3E%3Cg class='g' transform='translate(20 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.95;1 0.8;1 0.52;1 0.78;1 0.95;1 1.04;1 1.04;1 1.17;1 0.94;1 0.8;1 0.73;1 0.7;1 0.9;1 0.95' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(45 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.1;1 1.05;1 1.2;1 0.82;1 1.13;1 1.3;1 1.31;1 1.14;1 1.07;1 1.1;1 1.1' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(70 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.12;1 1.33;1 1.22;1 1.07;1 1.07;1 1.00;1 1.37;1 1.32;1 1.37;1 1.27;1 1.19;1 1.28;1 1.18;1 1.16;1 1.04;1 1.13;1 1.31;1 1.06;1 1.12' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(95 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.38;1 1.23;1 1.11;1 1.40;1 1.21;1 1.45;1 1.36;1 1.30;1 1.35;1 1.24;1 1.38;1 1.16;1 1.41;1 1.43;1 1.14;1 1.15;1 1.20;1 1.42;1 1.38' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(120 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.86;1 1.09;1 1.07;1 0.86;1 1.00;1 0.89;1 0.95;1 0.91;1 1.18;1 1.06;1 1.14;1 1.08;1 0.82;1 1.10;1 0.96;1 0.87;1 1.04;1 1.15;1 0.86' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(145 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.04;1 0.83;1 1.18;1 1.19;1 1.09;1 1.12;1 1.10;1 1.01;1 0.83;1 0.83;1 1.15;1 0.82;1 1.05;1 0.90;1 1.10;1 1.20;1 0.92;1 0.96;1 1.04' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(170 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.88;1 1.07;1 0.91;1 1.12;1 1.07;1 1.15;1 1.13;1 1.14;1 0.99;1 1.14;1 0.99;1 1.15;1 0.89;1 0.97;1 1.18;1 1.10;1 0.81;1 1.10;1 0.88' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(195 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.92;1 1.09;1 1.07;1 1.07;1 0.84;1 1.16;1 1.04;1 1.06;1 0.99;1 1.19;1 1.04;1 0.93;1 0.96;1 0.84;1 1.01;1 1.08;1 1.11;1 0.83;1 0.92' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(220 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.92;1 1.11;1 0.98;1 1.10;1 1.03;1 0.92;1 1.18;1 0.85;1 1.06;1 0.89;1 1.06;1 0.98;1 0.86;1 1.17;1 0.87;1 1.11;1 0.97;1 1.14;1 0.92' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(245 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.80;1 1.01;1 1.01;1 0.95;1 0.96;1 0.73;1 0.95;1 0.88;1 0.81;1 0.79;1 0.99;1 1.04;1 0.84;1 0.94;1 0.92;1 1.03;1 0.90;1 1.07;1 0.8' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(270 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.87;1 0.81;1 0.92;1 0.78;1 1.08;1 0.79;1 1.00;1 0.93;1 0.98;1 1.04;1 0.88;1 1.05;1 1.09;1 1.03;1 1.00;1 0.99;1 1.08;1 1.09;1 0.87' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(295 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.93;1 0.80;1 0.73;1 0.90;1 0.99;1 0.77;1 0.79;1 0.62;1 0.69;1 0.78;1 0.70;1 0.68;1 0.70;1 0.83;1 0.82;1 0.78;1 0.88;1 0.66;1 0.93' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(320 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.78;1 0.82;1 0.65;1 0.65;1 0.87;1 0.88;1 0.64;1 0.97;1 0.94;1 0.91;1 0.77;1 0.99;1 0.71;1 0.88;1 0.87;1 0.77;1 0.91;1 0.82;1 0.78' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(345 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.93;1 0.99;1 0.62;1 0.75;1 0.62;1 0.70;1 0.99;1 0.91;1 0.99;1 0.74;1 1.00;1 0.81;1 0.82;1 0.62;1 0.97;1 0.95;1 0.93;1 0.80;1 0.93' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(370 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.83;1 0.68;1 0.66;1 0.80;1 0.84;1 0.83;1 0.74;1 0.85;1 0.71;1 0.75;1 0.84;1 0.69;1 0.99;1 0.97;1 0.93;1 0.68;1 0.80;1 0.81;1 0.83' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(395 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.72;1 0.69;1 0.74;1 0.80;1 0.72;1 0.66;1 0.99;1 0.66;1 0.86;1 0.69;1 0.70;1 0.95;1 0.71;1 0.64;1 0.65;1 0.87;1 0.70;1 0.93;1 0.72' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(420 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.57;1 0.84;1 0.67;1 0.83;1 0.60;1 0.70;1 0.81;1 0.65;1 0.65;1 0.90;1 0.71;1 0.70;1 0.54;1 0.57;1 0.73;1 0.67;1 0.73;1 0.66;1 0.57' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(445 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.98;1 0.86;1 0.94;1 1.18;1 1.06;1 0.95;1 1.10;1 1.00;1 0.85;1 1.15;1 0.97;1 0.81;1 0.84;1 1.13;1 0.94;1 1.01;1 1.12;1 0.93;1 0.98' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(470 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.92;1 1.20;1 1.02;1 1.08;1 0.93;1 0.92;1 1.25;1 1.27;1 1.17;1 1.19;1 0.94;1 1.24;1 0.92;1 1.15;1 1.26;1 1.20;1 0.98;1 1.23;1 0.92' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(495 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.33;1 1.23;1 1.11;1 1.31;1 1.48;1 1.31;1 1.12;1 1.40;1 1.30;1 1.30;1 1.18;1 1.20;1 1.41;1 1.45;1 1.35;1 1.12;1 1.17;1 1.20;1 1.33' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(520 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.17;1 0.96;1 1.19;1 0.82;1 1.08;1 1.05;1 0.93;1 0.95;1 1.15;1 0.95;1 0.85;1 0.85;1 1.16;1 1.15;1 0.94;1 1.04;1 1.02;1 0.99;1 1.17' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(545 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 1.12;1 0.89;1 1.14;1 0.95;1 1.08;1 1.07;1 1.00;1 1.04;1 0.81;1 1.12;1 0.92;1 0.89;1 0.98;1 0.81;1 0.97;1 0.96;1 1.02;1 0.87;1 1.12' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(570 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.99;1 0.82;1 1.01;1 1.11;1 0.96;1 1.06;1 1.07;1 0.84;1 0.91;1 0.85;1 1.01;1 0.99;1 1.03;1 0.81;1 1.19;1 0.94;1 0.83;1 1.01;1 0.99' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(595 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.98;1 0.84;1 0.81;1 0.82;1 1.04;1 0.74;1 0.81;1 0.79;1 1.04;1 0.85;1 0.73;1 1.05;1 0.91;1 0.80;1 0.77;1 0.98;1 0.82;1 0.98;1 0.98' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(620 130) rotate(180)'%3E%3Crect class='test ' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.77;1 0.83;1 1.03;1 0.76;1 0.71;1 0.95;1 0.80;1 1.00;1 0.81;1 0.75;1 0.96;1 0.96;1 0.84;1 1.02;1 1.09;1 0.71;1 1.06;1 0.85;1 0.77' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(645 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.78;1 0.91;1 0.75;1 0.79;1 0.80;1 0.66;1 0.81;1 0.72;1 0.83;1 0.63;1 0.63;1 0.71;1 0.86;1 0.86;1 0.79;1 0.86;1 0.67;1 0.93;1 0.78' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(670 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.90;1 0.84;1 0.54;1 0.82;1 0.76;1 0.76;1 0.80;1 0.69;1 0.57;1 0.57;1 0.61;1 0.76;1 0.84;1 0.72;1 0.85;1 0.82;1 0.70;1 0.74;1 0.9' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(695 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.8;1 0.74;1 0.85;1 0.86;1 0.73;1 0.64;1 0.81;1 0.57;1 0.50;1 0.85;1 0.88;1 0.88;1 0.69;1 0.89;1 0.67;1 0.60;1 0.75;1 0.84;1 0.8' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(720 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.51;1 0.87;1 0.68;1 0.81;1 0.81;1 0.58;1 0.54;1 0.75;1 0.81;1 0.56;1 0.76;1 0.78;1 0.71;1 0.72;1 0.54;1 0.88;1 0.68;1 0.87;1 0.51' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(745 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.31;1 0.50;1 0.47;1 0.67;1 0.42;1 0.40;1 0.47;1 0.53;1 0.36;1 0.66;1 0.50;1 0.54;1 0.49;1 0.47;1 0.30;1 0.40;1 0.49;1 0.50;1 0.31' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(770 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.5;1 0.43;1 0.39;1 0.54;1 0.65;1 0.56;1 0.32;1 0.48;1 0.36;1 0.45;1 0.32;1 0.59;1 0.59;1 0.38;1 0.59;1 0.31;1 0.51;1 0.40;1 0.5' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(795 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.55;1 0.69;1 0.46;1 0.62;1 0.54;1 0.57;1 0.48;1 0.44;1 0.57;1 0.45;1 0.44;1 0.33;1 0.56;1 0.31;1 0.54;1 0.39;1 0.55;1 0.61;1 0.55' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(820 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.38;1 0.67;1 0.66;1 0.41;1 0.52;1 0.55;1 0.43;1 0.49;1 0.55;1 0.59;1 0.41;1 0.64;1 0.58;1 0.59;1 0.62;1 0.35;1 0.67;1 0.38;1 0.38' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(845 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.49;1 0.57;1 0.70;1 0.56;1 0.52;1 0.43;1 0.55;1 0.71;1 0.55;1 0.77;1 0.58;1 0.51;1 0.43;1 0.61;1 0.40;1 0.64;1 0.53;1 0.50;1 0.49' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(870 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.62;1 0.58;1 0.40;1 0.64;1 0.44;1 0.45;1 0.66;1 0.76;1 0.76;1 0.69;1 0.74;1 0.47;1 0.54;1 0.55;1 0.66;1 0.60;1 0.58;1 0.55;1 0.62' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(895 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.75;1 0.44;1 0.74;1 0.78;1 0.71;1 0.48;1 0.75;1 0.47;1 0.78;1 0.73;1 0.70;1 0.79;1 0.65;1 0.55;1 0.41;1 0.48;1 0.41;1 0.68;1 0.75' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(920 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.58;1 0.79;1 0.61;1 0.60;1 0.63;1 0.42;1 0.71;1 0.51;1 0.44;1 0.63;1 0.76;1 0.76;1 0.58;1 0.74;1 0.42;1 0.45;1 0.51;1 0.46;1 0.58' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(945 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.64;1 0.82;1 0.75;1 0.83;1 0.89;1 0.61;1 0.60;1 0.84;1 0.62;1 0.54;1 0.72;1 0.52;1 0.60;1 0.65;1 0.52;1 0.87;1 0.75;1 0.66;1 0.64' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(970 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.71;1 0.57;1 0.80;1 0.76;1 0.71;1 0.62;1 0.51;1 0.52;1 0.67;1 0.62;1 0.73;1 0.69;1 0.67;1 0.81;1 0.55;1 0.70;1 0.55;1 0.88;1 0.71' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(995 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.57;1 0.71;1 0.67;1 0.77;1 0.76;1 0.69;1 0.88;1 0.55;1 0.83;1 0.63;1 0.59;1 0.73;1 0.63;1 0.53;1 0.81;1 0.82;1 0.53;1 0.67;1 0.57' dur='7.5s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cstyle%3E .test %7B fill: context-fill; %7D %3C/style%3E%3C/svg%3E") !important;

		transition: fill 1000ms ease-in-out, opacity 1000ms ease-in-out;
	}

	/* Compatibility patch for collapsed split tabs */
	tab-group[split-view-group="true"]
		.tabbrowser-tab:not([zen-glance-tab])
		> .tab-stack
		> .tab-content
		> .tab-icon-stack::before {
		width: calc(var(--zen-sidebar-width) - 14px) !important;
	}

	/* Compatibility patch for hidden tab bar */
	#zen-main-app-wrapper[zen-compact-mode="true"]
		.tabbrowser-tab
		.tab-icon-stack::before {
		width: calc(var(--zen-sidebar-width) - 30px) !important;
	}

	/* Patch for Split Tabs */
	#navigator-toolbox[zen-sidebar-expanded="true"]
		tab-group[split-view-group="true"]
		.tabbrowser-tab {
		/* Section based on how many tabs are split */

		/* 2 split tabs */
		&:nth-of-type(1):nth-last-of-type(2) .tab-icon-stack::before,
		&:nth-of-type(2):nth-last-of-type(1) .tab-icon-stack::before {
			width: calc(var(--zen-sidebar-width) / 2 - 11px) !important;
		}

		/* 3 split tabs */
		&:nth-of-type(1):nth-last-of-type(3) .tab-icon-stack::before,
		&:nth-of-type(2):nth-last-of-type(2) .tab-icon-stack::before,
		&:nth-of-type(3):nth-last-of-type(1) .tab-icon-stack::before {
			width: calc(var(--zen-sidebar-width) / 3 - 8px) !important;
		}

		/* 4 split tabs */
		&:nth-of-type(1):nth-last-of-type(4) .tab-icon-stack::before,
		&:nth-of-type(2):nth-last-of-type(3) .tab-icon-stack::before,
		&:nth-of-type(3):nth-last-of-type(2) .tab-icon-stack::before,
		&:nth-of-type(4):nth-last-of-type(1) .tab-icon-stack::before {
			width: calc(var(--zen-sidebar-width) / 4 - 8px) !important;
		}
	}

	/* TODO: Attempt at different animation for subset of tabs, will need manual re-timing of each svg animation sadly */
	.tabbrowser-tab[soundplaying] {
		/* 4s delay */
		&:nth-of-type(2n) .tab-icon-stack::before {
			/* background-image: '' !important; */
		}

		/* 6s delay */
		&:nth-of-type(3n) .tab-icon-stack::before {
			/* background-image: '' !important; */
		}

		/* 2s delay */
		&:nth-of-type(4n) .tab-icon-stack::before {
			/* background-image: '' !important; */
		}

		/* 5s delay */
		&:nth-of-type(5n) .tab-icon-stack::before {
			/* background-image: '' !important; */
		}
	}

	.tabbrowser-tab[soundplaying]:not([zen-glance-tab])
		> .tab-stack
		> .tab-content
		.tab-icon-stack::before {
		fill: var(
			--zen-mods-AudioIndicatorEnhanced-audioWave-colorPlaying,
			-moz-dialogtext
		);
		opacity: var(--zen-mods-AudioIndicatorEnhanced-audioWave-opacity, 0.2);
	}

	.tabbrowser-tab[muted]:not([zen-glance-tab])
		> .tab-stack
		> .tab-content
		.tab-icon-stack::before {
		fill: var(
			--zen-mods-AudioIndicatorEnhanced-audioWave-colorMuted,
			color-mix(in srgb, -moz-dialogtext 50%, rgb(129, 0, 0) 50%)
		);
		opacity: 0.2;
		background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3Csvg width='1000' height='120' viewBox='0 0 1000 120' preserveAspectRatio='none' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1000' height='120' /%3E%3Cg class='g' transform='translate(20 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(45 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(70 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(95 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(120 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(145 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(170 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(195 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(220 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(245 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(270 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(295 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(320 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(345 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(370 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(395 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(420 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(445 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(470 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(495 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(520 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(545 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(570 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(595 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(620 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(645 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(670 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(695 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(720 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(745 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(770 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(795 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(820 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(845 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(870 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(895 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(920 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(945 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(970 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cg class='g' transform='translate(995 130) rotate(180)'%3E%3Crect class='test' width='20' height='60' rx='5'%3E%3CanimateTransform attributeName='transform' type='scale' values='1 0.85' dur='1s' repeatCount='indefinite' /%3E%3C/rect%3E%3C/g%3E%3Cstyle%3E .test %7B fill: context-fill; %7D %3C/style%3E%3C/svg%3E") !important;
	}
}

/* Name: Private Mode Highlighting */
/* Description: This theme adds a configurable background, border and an icon to any private browsing window. */
/* Author: @danm36 */
/**
* This Zen theme adds additional styling to the private browsing mode window such as a gradient on the toolbar,
* a border around the browser page, and an icon in the URL bar. These are configurable in the Zen Mods settings.
*
* The --pbmh prefix stands for Private Browsing Mode Highlighting.
*/

/*******************************************\
* Base variables.
\*******************************************/

:root {
    --pbmh-private-browsing-mode-base-color: #32064e;
    --pbmh-private-browsing-mode-gradient-stop-color: rgb(from var(--pbmh-private-browsing-mode-color) r g b / 0%);
    --pbmg-private-browsing-mode-gradient-stop-position: var(--zen-toolbar-height, 34px);
    --pbmg-private-browsing-mode-border-size: 2px;
}


/*******************************************\
* Topbar highlighting.
\*******************************************/

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="match-zen"]) {
    --pbmh-private-browsing-mode-base-color: var(--zen-primary-color);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="blue"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #aac7ff calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="teal"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #74d7cb calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="green"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #a0d490 calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="yellow"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #dec663 calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="orange"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #ffb787 calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="brown"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #dec1b1 calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="red"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #ffb1c0 calc(l - 0.5) c h);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-color="pink"]) {
    --pbmh-private-browsing-mode-base-color: oklch(from #f6b0ea calc(l - 0.5) c h);
}

:root {
    --pbmh-private-browsing-mode-color: var(--pbmh-private-browsing-mode-base-color);
    --pbmh-private-browsing-mode-border: oklch(from var(--pbmh-private-browsing-mode-color) calc(l + 0.2) c h);

    &:where([lwt-toolbar="light"]) {
        --pbmh-private-browsing-mode-color: oklch(from var(--pbmh-private-browsing-mode-base-color) calc(l + 0.45) calc(c + 0.05) h);
        --pbmh-private-browsing-mode-border: oklch(from var(--pbmh-private-browsing-mode-color) calc(l - 0.2) c h);
    }
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-highlighting-style="solid"]) {
    --pbmh-private-browsing-mode-gradient-stop-color: var(--pbmh-private-browsing-mode-color);
}

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-highlighting-style]:not([uc-private-browsing-top-bar-highlighting-style="none"])) {
    &[privatebrowsingmode] #zen-appcontent-navbar-container,
    &[privatebrowsingmode][zen-compact-mode="true"]:not([zen-single-toolbar="true"]) #nav-bar {
        background-image: linear-gradient(to bottom,
                var(--pbmh-private-browsing-mode-color),
                var(--pbmh-private-browsing-mode-gradient-stop-color) var(--pbmg-private-browsing-mode-gradient-stop-position),
                transparent calc(var(--pbmg-private-browsing-mode-gradient-stop-position) + 1px)) !important;
    }

    &[privatebrowsingmode][zen-single-toolbar="true"] #urlbar-background {
        background-color: var(--pbmh-private-browsing-mode-color) !important;
    }
}

/*******************************************\
* Viewport border styling.
\*******************************************/

:root:has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-border-style="thin"]) {
    --pbmg-private-browsing-mode-border-size: 1px;
}

:root[privatebrowsingmode]:not([inDOMFullscreen="true"]):not([chromehidden~="location"]):not([chromehidden~="toolbar"]):has(#theme-Private-Mode-Highlighting[uc-private-browsing-top-bar-border-style]:not([uc-private-browsing-top-bar-border-style="none"])) {
    & #tabbrowser-tabbox #tabbrowser-tabpanels .browserSidebarContainer {
        box-shadow: 0 0 0 var(--pbmg-private-browsing-mode-border-size) var(--pbmh-private-browsing-mode-border) !important;
    }
}

/*******************************************\
* Private Browsing Mode Icon styling.
\*******************************************/

@media not (-moz-bool-pref: "uc.private-browsing-top-bar.hide-icon") {
    [privatebrowsingmode] .zen-current-workspace-indicator-icon {
        display: block !important;
        color: transparent !important;
        aspect-ratio: 1;
        border-radius: 100%;
        background-color: oklch(from var(--pbmh-private-browsing-mode-base-color) calc(l + 0.05) calc(c + 0.2) h);
        background-image: url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48c3R5bGU+KntmaWxsOm5vbmU7c3Ryb2tlOiNGRkZGRkY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjEuOTJweDt9PC9zdHlsZT48L2RlZnM+PHBvbHlsaW5lIHBvaW50cz0iMC41IDExLjA0IDEyIDExLjA0IDIzLjUgMTEuMDQiLz48cGF0aCBkPSJNMTkuNjcsMTFINC4zM0w1LDQuNjhBMi41NCwyLjU0LDAsMCwxLDcuNTcsMi40MmgwYTIuNDcsMi40NywwLDAsMSwxLjEzLjI3aDBhNy40Myw3LjQzLDAsMCwwLDYuNiwwaDBhMi40NywyLjQ3LDAsMCwxLDEuMTMtLjI3aDBBMi41NCwyLjU0LDAsMCwxLDE5LDQuNjhaIi8+PGNpcmNsZSBjeD0iNi43MyIgY3k9IjE4LjIzIiByPSIzLjM1Ii8+PGNpcmNsZSBjeD0iMTcuMjciIGN5PSIxOC4yMyIgcj0iMy4zNSIvPjxwYXRoIGQ9Ik0xMC4wOCwxOC43MWExLjkyLDEuOTIsMCwxLDEsMy44NCwwIi8+PGxpbmUgeDE9IjEuNDYiIHkxPSIxNS44MyIgeDI9IjQuMzMiIHkyPSIxNS44MyIvPjxsaW5lIHgxPSIxOS42NyIgeTE9IjE1LjgzIiB4Mj0iMjIuNTQiIHkyPSIxNS44MyIvPjwvc3ZnPg==");
        background-repeat: no-repeat;
        background-position: center center;
        background-size: 65%;
        pointer-events: none;
    }
}

/* Name: No Top Sites */
/* Description: Annoyed with top sites that appear when you open the URL bar? With this mod, you can now hide them! */
/* Author: @Ivaon */

#urlbar:not([usertyping]) {
  @media -moz-pref("mod.ivaon.urlbar.hide_results", "0") {
    &>.urlbarView {
      display: none !important;
    }
  }

#urlbar-results div.urlbarView-row[row-selectable] {
    @media -moz-pref("mod.ivaon.urlbar.hide_results", "1") {
      &[type="top_site"] {
        display: none !important;
      }
    }

@media -moz-pref("mod.ivaon.urlbar.hide_results", "2") {
      &[type="top_site"]:not([pinned]) {
        display: none !important;
      }
    }
  }
}

/* Name: Lean */
/* Description: Extensions. Spaces. Toolbars. Clean them up, give extra room for your stuff */
/* Author: @KiKaraage */
/*
* github.com/KiKaraage/
* ZenMods/Lean
* Show things only when you need it: Top & bottom buttons, workspace indicator, bookmarks bar and more
*/

/* 1 - Hide Zoom button in URL bar */
@media (-moz-bool-pref: "mod.lean.hide-zoom") {
  #urlbar-zoom-button {
    display: none !important;
  }
}

/* 2 - Show translation button when hovering URL bar in Single Toolbar mode */
:root[zen-single-toolbar='true'] {
  @media (-moz-bool-pref: "mod.lean.show-translation") {
    #urlbar:hover {
      #translations-button {
        display: inherit !important; 
      }
      #translations-button {
        &[hidden="true"] {
          #translations-button-circle-arrows, #translations-button-locale {
            visibility: collapse !important;
          }
          #translations-button-icon {
            visibility: visible !important;
          }
        }
      }
    }
    #translations-button {
      transition: all 0.1s ease !important;
    }
    & #translation-button:not([open]) {
      margin-inline-start: calc(-8px - 2 * var(--urlbar-icon-padding));
      transform: translateX(100%);
      opacity: 0;
    }
    #urlbar:hover #translations-button {
      opacity: 1 !important;
      margin-inline-start: 0 !important;
      transform: none !important;
      display: flex;
    }
  }
}

/* 3 - Show page action button for extensions when hovering URL bar in Single Toolbar mode */
:root[zen-single-toolbar='true'] {
  @media (-moz-bool-pref: "mod.lean.show-pageactions") {
    #urlbar:hover {
      .urlbar-addon-page-action {
        display: inherit !important;
      }
    }
    #page-action-buttons {
      order: 1 !important;
    }
  }
}

/* 4 - Hide top workspace indicator unless when editing space name
 * + adjust Essentials area bottom padding */
@media -moz-pref("mod.lean.top-workspace") {
  .zen-current-workspace-indicator:not(:has(.tab-label-container-editing)) {
    visibility: collapse !important;
  }
  @media -moz-pref("mod.lean.pinned-ext") {
    .zen-essentials-container:not(:empty) {
      padding-bottom: 4px !important;
    }
    @media not -moz-pref("mod.lean.bottom-buttons") {
      #main-window[zen-single-toolbar="true"] {
        .zen-essentials-container {
          padding-bottom: 4px !important;
          padding-top: 4px !important;
        }
      }
    }
  }
  @media not -moz-pref("mod.lean.pinned-ext") {
    .zen-essentials-container:not(:empty), .zen-current-workspace-indicator {
      padding-bottom: 0px !important;
    }
    #main-window[zen-single-toolbar="true"] {
      .zen-essentials-container {
        padding-bottom: 6px !important;
      }
    }
  }
}

/* 5 - Hide bottom buttons area unless tab sidebar is hovered */
:root:not([customizing]) {
  @media -moz-pref("mod.lean.bottom-buttons") {
    #zen-sidebar-foot-buttons, #zen-workspaces-button, #zen-sidebar-foot-buttons toolbarbutton {
      transition: ease 0.2s !important;
    }
    #titlebar:not(:hover) {
      zen-workspace {
        & > arrowscrollbox {
          &[overflowing] {
            &::after {
              height: 0px !important;
            }
          }
        }
      }
      #zen-sidebar-foot-buttons {
        min-height: 3px !important;
        gap: 1px !important;
        padding-top: 1px !important;
        toolbarbutton, #zen-workspaces-button {
          opacity: 0 !important;
          height: 0px !important;
        }
      }
    }
  }
}

/* 6 - Ninja top buttons on Single Toolbar mode
 * You can hover slightly above URL bar to access the top buttons, but you can't see it */
:root[zen-single-toolbar="true"] {
  --top-toolbar-hover-opacity: 0;
  @media -moz-pref("mod.lean.ninja-top-buttons") {
    #zen-sidebar-top-buttons, #zen-sidebar-top-buttons-customization-target, #zen-sidebar-top-buttons toolbarbutton {
      transition: ease 0.2s !important;
    }
    #navigator-toolbox {
      & #zen-appcontent-navbar-wrapper, & #zen-sidebar-top-buttons {
        --zen-toolbar-height: 1px !important;
        opacity: var(--top-toolbar-hover-opacity) !important;
        z-index: 9 !important;
      }
    }
    #navigator-toolbox:not(:hover) {
      & #zen-appcontent-navbar-wrapper, & #zen-sidebar-top-buttons {
        opacity: 0 !important;
      }
    }
  }
}


/* 7 - Only show bookmarks when hovering top navigation bar on Multiple & Collapsed Toolbar mode
 * Mimicking how it works on Single Toolbar */
:root:not([zen-single-toolbar="true"]) {
  @media -moz-pref("mod.lean.bookmarks") {
    #PersonalToolbar:not([collapsed="true"]) {   
      min-height: 2px !important;
      height: 2px !important;
      opacity: 0;
      transition: 0.2s ease !important;
    }
    &[customizing] {
      #PersonalToolbar {
        opacity: 1;
        height: 30px !important;
      }
    }  
    #zen-appcontent-navbar-container:hover {
      #PersonalToolbar {
        opacity: 1;
        height: 30px !important;
      }
    }
    #TabsToolbar {
      margin-block-start: 2px !important;
    }
  }
}

/* 8 - WIP: Bottom buttons as "pinned extensions" on Single Toolbar mode
 * Also hide the workspace buttons, and the separator below tabs area */

/* Part A: When bottom buttons is always shown */
@media -moz-pref("mod.lean.pinned-ext") {
  #main-window[zen-single-toolbar="true"] {
    #titlebar {
      zen-workspace {
        & > arrowscrollbox {
          &[overflowing] {
            &::after {
              height: 0px !important;
            }
          }
        }
      }
    }
    #navigator-toolbox[zen-sidebar-expanded="true"] {
      @media -moz-pref("mod.lean.bottom-buttons") {
        .zen-essentials-container {
          :root[zen-single-toolbar="true"] &:not(:empty) {
            padding-top: 0px !important;
          }
        }
      }
      & #zen-sidebar-foot-buttons {
        order: -1 !important;
        justify-content: center !important;
        padding-inline: calc(var(--zen-toolbox-padding) - 3px) !important;
        gap: 4px !important;
        padding-top: 4px !important;
        padding-bottom: 0px !important;
      }
      #zen-sidebar-foot-buttons toolbarbutton {
        .toolbarbutton-1 {
          padding-inline: 0 !important;
          margin: 0 !important;
          margin-top: 0 !important;
        }
        padding-inline: 0px !important;
        min-width: 40px !important;
        &.toolbarbutton-1 {
          &:not([disabled]) {
            &:hover > :is(.toolbarbutton-icon, .toolbarbutton-text, .toolbarbutton-badge-stack) {
              background-color: transparent !important;
            }
          }
        }
      }
      #zen-sidebar-foot-buttons toolbarbutton {
        background-color: var(--zen-toolbar-element-bg) !important;
        border-radius: var(--tab-border-radius) !important;
      }
      #zen-sidebar-foot-buttons toolbarbutton:hover {
        background-color: var(--toolbarbutton-hover-background) !important;
      }
      @media not -moz-pref("mod.lean.pinned-ext.workspaces") {  
        #zen-workspaces-button {
          display: none !important; 
          height: 0 !important;
          min-height: 0 !important;
        }
      }
      @media -moz-pref("mod.lean.pinned-ext.workspaces") {  
        #zen-sidebar-foot-buttons {
          gap: 0px !important;
        }
      }
    }
  }
}

@media not -moz-pref("mod.lean.bottom-buttons") {
  @media -moz-pref("mod.lean.pinned-ext") {
    #main-window[zen-single-toolbar="true"] {
      #navigator-toolbox[zen-sidebar-expanded="true"] {
        & #zen-sidebar-foot-buttons {
          min-height: 30px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          height: 30px !important;
        }
        & #zen-sidebar-foot-buttons {
          padding-top: 4px !important;
        }
      }
    }
  }
}

/* Part B: When bottom buttons are only shown in hover */
@media -moz-pref("mod.lean.bottom-buttons") {
  @media -moz-pref("mod.lean.pinned-ext") {
    #main-window[zen-single-toolbar="true"] {
      #navigator-toolbox[zen-sidebar-expanded="true"]:hover {
        & #zen-sidebar-foot-buttons {
          min-height: 30px !important;
          padding-bottom: 4px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          min-width: 40px !important;
          height: 30px !important;
        }
      }
      #navigator-toolbox[zen-sidebar-expanded="true"] {
        & #zen-sidebar-foot-buttons {
          min-height: 0px !important;
        }
        #zen-sidebar-foot-buttons toolbarbutton {
          margin-block: 1px 0px !important;
          height: 0px !important;
        }
      }
    }
  }
}

/* Name: Cleaned URL bar */
/* Description: Cleans up zen's URL bar. */
/* Author: @Dinno-DEV */

/* Blurs the background */
#urlbar[breakout-extend="true"] .urlbar-background {
    border: solid 3px color-mix(in hsl, hsl(0 0 50), transparent 90%) !important;
    border-radius: 15px !important;
    background-color: color-mix(in hsl, var(--mod-cleanedurlbar-customcolor), transparent var(--mod-cleanedurlbar-customtransparency)) !important;
    backdrop-filter: blur(25px) saturate(2) !important;
}

/* Custom URL result selected color */
.urlbarView-row {
  &[selected] {
    background-color: var(--mod-cleanedurlbar-customselectcolor) !important;
    color: var(--mod-cleanedurlbar-customselectfontcolor) !important;
  }
}

/* Unifies the border radius */
.urlbarView-row {
  border-radius: 11px !important;
}

/* Deletes the border */
.urlbarView-body-inner {
   border: none !important;
}

/* Styles the search options */
.search-one-offs {
  border-top: none !important;
  border-radius: 10px !important;
  padding: 4px !important;
  margin: 0px 0px 7px 0px !important;
  backdrop-filter: brightness(130%);
}

.searchbar-engine-one-off-item {
  border-radius: 8px !important;
  margin-right: 3px !important;
}

#urlbar-anon-search-settings {
  margin-right: 0px !important;
}

/* Fixes missing blur effect */
.browserStack browser {
  transform: translateX(0) !important;
}

/* Name: Vertical Split Tab Groups */
/* Description: Display tab groups created from split tabs as vertical lists instead of horizontal ones. */
/* Author: @ToBinio */
tab-group[split-view-group] .tab-group-container {
    display: flex;
    flex-direction: column;
    padding: 2px 2px !important;
    position: relative;

    &::after {
        content: "";
        width: 3px;
        height: calc(100% - 8px);
        background-color: var(--tab-selected-bgcolor);
        position: absolute;
        left: 2px;
        top: 50%;
        transform: translateY(-50%);
        border-radius: 2px;
    }

    &:hover,
    &:has(> tab:is([visuallyselected], [multiselected])) {
        &::after {
            width: 0;
        }
    }

    & > .tabbrowser-tab {
        &:not(:last-child)::after {
            width: 0 !important;
            height: 0 !important;
        }
    }
}

/* Name: Only Close On Hover */
/* Description: Show tab's close button only on hover, even on the active tab. */
/* Author: @p-sw */
#tabbrowser-tabs
  .tabbrowser-tab:not([pinned]):is([visuallyselected]):not(:hover)
  .tab-close-button {
  display: none !important;
}

/* Name: Floating Status Bar */
/* Description: Mod for Zen Browser that detaches the status bar from the bottom left corner of the browser window. */
/* Author: @AmirhBeigi */
#statuspanel {
  margin: 10px !important;
}

#statuspanel-label {
  border-radius: 10000px !important;
  padding: 2px 10px !important;
  border: 1px solid var(--zen-colors-border) !important;
  background: var(--zen-colors-tertiary) !important;
}

/* Name: Custom Statusbar */
/* Description: This Mod allows you to adjust the rounding, margin, border thickness and any color of the statusbar. */
/* Author: @Archer7x */
#statuspanel {
  margin: var(--theme-customstatusbar-margin) !important;
}

#statuspanel-label {
  border-radius: var(--theme-customstatusbar-radius) !important;
  padding: 2px 10px !important;
  border: var(--theme-customstatusbar-border_thickness) solid
    var(--theme-customstatusbar-color_border) !important;
  background: var(--theme-customstatusbar-color_background) !important;
  color: var(--theme-customstatusbar-text_color) !important; /* Text color */
}

/* Name: Colored container tab */
/* Description: Changes the default container tab theme */
/* Author: @ocean-mars */
.tab-context-line {
  display: none !important;
}
#tabbrowser-tabs {
  & .tabbrowser-tab {
    &[selected] .tab-background {
      border: 2px solid var(--identity-icon-color) !important;
      opacity: 0.8 !important;
    }
  }
}

/* Name: TitleBarButton UI Tweaks */
/* Description: Small UI tweaks to the titlebar buttons to make them more coherent with the Zen Browser design philosophy. */
/* Author: @DaitiDay */
.titlebar-buttonbox {
  padding: 9px !important;
}

.titlebar-button:hover {
  background-color: var(--button-hover-bgcolor) !important;
}

.titlebar-min {
  padding-left: 10px !important;
  padding-right: 10px !important;
  border-radius: var(--uc-contextmenu-menuitem-border-radius) !important;
}

.titlebar-max,
.titlebar-restore {
  padding-left: 10px !important;
  padding-right: 10px !important;
  margin-left: 5px !important;
  margin-right: 5px !important;
  border-radius: var(--uc-contextmenu-menuitem-border-radius) !important;
}

.titlebar-close {
  padding-left: 10px !important;
  padding-right: 10px !important;
  border-radius: var(--uc-contextmenu-menuitem-border-radius) !important;
}

.titlebar-close:hover {
  background-color: var(--buttons-destructive-hover-bgcolor) !important;
}

/* Name: Left Side Glance Buttons */
/* Description: Move the at a glance buttons to the left side of the window. */
/* Author: @psu */

/**
* Zen Mod: Right Left Glance Buttons
* Move the at a glance buttons to the right side of the window.
* Pontus Sundn <hi@pontus.cc>
*/
.zen-glance-sidebar-container {
  right: 100% !important;
  left: unset !important;
}

/* Name: Better Unloaded Tabs */
/* Description: Makes unloaded tabs easier to notice by making them greyscale and transparent. */
/* Author: @Felkazz */
.tabbrowser-tab[pending="true"] {
  filter: grayscale(1);
  opacity: 0.5;
}

/* Name: Better Active Tab */
/* Description: Adds a bright line next to the active tab to better highlight it. */
/* Author: @HliasOuzounis */
.tab-background {
  position: relative;
}

.tab-background[selected=""]::after {
  content: "";
  position: absolute;
  width: 3px;
  height: 100%;
  background-color: var(--zen-primary-color);
}

/* Name: Better CtrlTab Panel */
/* Description: Re-style and add customization options for the CtrlTab panel. */
/* Author: @psu */
/**
* Zen Mod: Better CtrlTab Panel
* Re-style and add customization options for the Ctrl+Tab panel.
* Pontus Sundn <hi@pontus.cc>
*/
@-moz-document url-prefix("chrome:") {
  :root {
    /**
    --psu-better_ctrltab-roundness: 50px;
    --psu-better_ctrltab-padding: 35px;
    --psu-better_ctrltab-zoom: .8;

    --psu-better_ctrltab-background: light-dark(rgba(146, 145, 144, 0.94), rgba(24, 23, 22, 0.94));
    --psu-better_ctrltab-shadow_size: 20px;
    
    --psu-better_ctrltab-preview_padding: 30px;
    --psu-better_ctrltab-preview_border_width: 1px;
    --psu-better_ctrltab-preview_border_color: light-dark(rgba(253, 255, 254, 0.1), rgba(83, 82, 79, 0.2));
    --psu-better_ctrltab-preview_focus_background: light-dark(rgba(77, 76, 78, 0.8), rgba(184, 185, 183, 0.18));
    --psu-better_ctrltab-preview_font_size: 13px; 
    --psu-better_ctrltab-preview_letter_spacing: 0px;
    
    --psu-better_ctrltab-preview_favicon_size: 36px;
    --psu-better_ctrltab-preview_favicon_outdent: 12px;
/**/

    /* helpers */
    --psu-zoom-invert: pow(var(--psu-better_ctrltab-zoom), -1);
    --psu-roundness-zoomed: calc(var(--psu-better_ctrltab-roundness) * var(--psu-better_ctrltab-zoom));
  }

  #ctrlTab-panel {
    /* panel styling */
    --panel-border-radius: var(--psu-roundness-zoomed) !important;
    --panel-shadow: 0 0 var(--psu-better_ctrltab-shadow_size) calc(var(--psu-better_ctrltab-shadow_size) / 3) rgba(1, 1, 4, 0.2) !important;
    --panel-background: var(--psu-better_ctrltab-background) !important;
    --panel-padding: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    background-color: unset !important;

    /* panel zoom adjust size */
    --psu-default_spacing: 10%;
    --psu-tile-counter: 0;
    &:has(.ctrlTab-preview:nth-child(1):not([hidden])) {
      --psu-tile-counter: 1;
    }
    &:has(.ctrlTab-preview:nth-child(2):not([hidden])) {
      --psu-tile-counter: 2;
    }
    &:has(.ctrlTab-preview:nth-child(3):not([hidden])) {
      --psu-tile-counter: 3;
    }
    &:has(.ctrlTab-preview:nth-child(4):not([hidden])) {
      --psu-tile-counter: 4;
    }
    &:has(.ctrlTab-preview:nth-child(5):not([hidden])) {
      --psu-tile-counter: 5;
    }
    &:has(.ctrlTab-preview:nth-child(6):not([hidden])) {
      --psu-tile-counter: 6;
    }
    &:has(.ctrlTab-preview:nth-child(7):not([hidden])) {
      --psu-tile-counter: 7;
      --psu-default_spacing: 7%;
    }
    --panel-shadow-margin: var(--psu-better_ctrltab-shadow_size)
      calc(
        /* decrease by default non-css space */ var(--psu-default_spacing) + (90% - var(--psu-default_spacing)) / 2 * (1 - var(--psu-better_ctrltab-zoom)) -
          (
            /* increase by tile padding and borders */ ((var(--psu-better_ctrltab-preview_padding) * 2 + var(--psu-better_ctrltab-preview_border_width) * 2) * var(--psu-tile-counter)) / 2
              /* increase by panel padding */ + (var(--psu-better_ctrltab-padding) * 0.8)
          ) * var(--psu-better_ctrltab-zoom)
      ) !important;

    #ctrlTab-previews {
      /* panel zoom and padding*/
      zoom: var(--psu-better_ctrltab-zoom) !important;
      padding: var(--psu-better_ctrltab-padding) calc(var(--psu-better_ctrltab-padding) * 0.8) !important;

      .ctrlTab-preview {
        margin: 0 !important;
        padding: 0 !important;
        border-radius: calc(var(--psu-roundness-zoomed) * 0.8) !important;

        /* previews styling */
        .ctrlTab-preview-inner {
          margin: 0 !important;
          padding: calc(var(--psu-better_ctrltab-preview_padding) + var(--psu-better_ctrltab-preview_border_width)) !important;
          border-radius: calc(var(--psu-roundness-zoomed) * 0.8) !important;
          padding-bottom: calc(var(--psu-better_ctrltab-preview_padding) / 2) !important;
          border: none !important;
          text-shadow: 0.5px 0.5px 0px light-dark(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5));
        }
        .ctrlTab-canvas {
          margin-bottom: calc(var(--psu-better_ctrltab-preview_padding) / 2 + var(--psu-better_ctrltab-preview_border_width)) !important;
          box-shadow: 0 0 0 var(--psu-better_ctrltab-preview_border_width) var(--psu-better_ctrltab-preview_border_color) !important;
        }
        .ctrlTab-canvas,
        img,
        canvas {
          border-radius: calc(var(--psu-roundness-zoomed) * 0.25) !important;
        }

        /* label styling */
        .ctrlTab-label {
          font-size: calc(var(--psu-better_ctrltab-preview_font_size) * var(--psu-zoom-invert)) !important;
          letter-spacing: calc(var(--psu-better_ctrltab-preview_letter_spacing) * var(--psu-zoom-invert));
          margin: 0 calc(var(--psu-better_ctrltab-preview_border_width) * -1) !important;
          padding: 0 !important;
        }

        /* favicon styling and position */
        .ctrlTab-favicon-container image {
          height: var(--psu-better_ctrltab-preview_favicon_size) !important;
          width: var(--psu-better_ctrltab-preview_favicon_size) !important;
          box-shadow: none !important;
          background: none !important;
          position: absolute !important;
          padding: 0 !important;
          margin: 0 !important;
          margin-right: calc(var(--psu-better_ctrltab-preview_favicon_outdent) * -1) !important;
          margin-top: calc(
            (var(--psu-better_ctrltab-preview_padding) / 2 + var(--psu-better_ctrltab-preview_border_width)) * -1 - var(--psu-better_ctrltab-preview_favicon_size) +
              var(--psu-better_ctrltab-preview_favicon_outdent) * 0.8
          ) !important;
        }

        /* focused bg styling */
        &:focus {
          .ctrlTab-preview-inner {
            background: var(--psu-better_ctrltab-preview_focus_background) !important;
            border: none !important;
          }
        }
      }
    }
  }
}

/* Name: Better UniExtBtn */
/* Description: change unified extensions button to zen browser icon */
/* Author: @lindongbin */
:root:has(#theme-Better-UniExtBtn[theme-better_uniextbtn-default="Default"]) {
  #unified-extensions-button {
    list-style-image: url(chrome://branding/content/icon32.png) !important;
  }
}
:root:has(#theme-Better-UniExtBtn[theme-better_uniextbtn-default="Firefox"]) {
  #unified-extensions-button {
    list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAHY0lEQVR4Aa3VA5RrSdfG8f+uOidJp/umczm2ffFhbNvG9722bdv22LZt+3I81+04B1XvfpPmWHut3yk06smus1Z4L8uXDv6MHzpowA8eWFS8FaY9eU+cCvxaFfF8W/FWGDy8a6n7DM7/H96DR3ldu0MVb8a0J+9CI1qXJP11a+79GOdP1f11FW/EtCfvQpx8mziFxMHEEEV1KYkrKl6Pea1Nbnrs/7hz7q2KUQsqRcUE/eV1acb/pyFQ7b9N3fguzNTxVsXrMa/avFgPb6SnukY8W6EgXvszrszjivH08F0VLZFK0rbUgRt9H2aS+lORznUxnTMV45kJG6fNPZSGnEodTJwUFGbphqdSll/H/SxWjEc92kYxSoO0uzEcwo90g/9rlKpHpCmX491MxQgzuvjtE0UieyqxhYZA3UGp8CjUtSMR2YrkFdf+/szi9X88+zM3/uncSx/81/f+7/HzPsu8q09i8MUNcCUHUTImceAAL+RC+UW1nMzHuUvxSVGBCloTgMT+GuOLipaGyg/OpLuE/jVI58wHb/zsdxD5tBVbDMQwOPe/8UDqHYuuPJjCZnP5nw/+mfyUPhADRtkAaIfosum23klBxH8b+KzCfuczG8IPXi4C5yHQwvDoPYhCBSkz1n9y1+WLd8xFzVUxxmIRjBIBVHXFZF58aEtW3exxsp0V8Aac8gpBnGQBRNymkP4VXKPdgdj8H2JB/DgMVwreATFhdoCdj/wY8x7+GM8/djyJ81hlnCPTUWfHb/0QlyRUelalEPcCHswIQARJPd64ohh/KHBagPcQB7sggHgIVHcM0wUyWWUAoNaEuobI9bP1dj9lw1nnMvehj/LS0wdinYO4wM1f/h6z3v9n1t3pTnAWBj04ZQA7LFROwMsu7QCpgcjuCh4Asg5Wa0ImgNDqqHTOtDyIgPPKkZ/cZOstzmT+Nw4jcA5JBO9SHjzzWKZt8CRd03ohD/RZALCigIwHawBmKgKSVoAiAi2VDCzsgo0bYB04lSojEAaQDyETsmTZf3PPdZ+irvMgTTF4SAVX7+SRC/dj5/f/C6D9d5UQLBAIFBJILIhtB1g2a8uZq+1+LwiAV8CSTujPwqoRbJjCJMdAeRVue+j/WLh4T2I3jcCEhN4ShmDFYR2IAXC8OHdDaMYAYBxU82AFAgPShHoejAEgUEViy2h5UbS9LLBajf5oMr866wc0wlWQvEEyNQKbIcSSwZBNIfAO41NQ9ZXd0IgBAQdUDAQWpjQhcfi6gCgguDtTm3vIUBdhdwUA/Pggqmy49/n/pr/q8ZMq4DziEwI0QOtpiT1kXUqQRqC8ohaDy0BqoGzxOUE6q9DwMBiOvtzm5OLi3migAFEwpjnOCzmKhZXUkyr1uEwtLqky1aStNk4jqhFFDVZb6ykYMjBodQxw5RAKZUgSqAq+YmmWzFxF0P8L61Z8pHhf5/S+bfHQJm1OLcuzw4YPcWH3/qysTcebFHyESTOkhLjUokt8M8VFCVYDbLXhvdCfARfiG3lkykDr2qhbXJTRUZBAngMwootGI3tbrbcIsR3ugp3Yhbun89l9/ko+qCDVGpQruHKJqDakBmnq2KyXaDZKrDX1KWau+ij0ZqAvgwR1JFuFmihwPTkdDQN9co3C6IMnwujs0sppELcOV+NHVc2wzv2eb+74J6ZP6kGazeEgZZJqiaRWJo6qbDb5MU7c4ixYmYUhC7YJaQxVgYrgSxa3sgNftdww31+usFuvuykfWDzU/4HytL0llTVz+SbiAScTryKxFFc6dlnnQVZP+wEo2grT7ACb5V7g2BnXsVfxHsLEgfGQTYb/1kJqWpKV3VDLM1iXi/a8PDrtqmecl451DwLg8oG1DtnMmcsKq/bQ1V3BmBTsfzgIfHucwINxICivADt8eADkBLJGtcc0ydHsmU7QEXBFfzwTeFwRnLFtDoBD7nv5+vv61v2XXzHlfR7oKtQxLkFcCqkDK8qMHdIex4gSMxaoKZBtS8lQ18NtJsPSmv/Nyfc3nma4RjsA8Jnq1HU+WC9cY01z865pJQrdDcQkrW6IpGOfun3oxLnw6m/SEBIyVFbOIMhmiXJy35oL+vYDBhkuGxY3YaTuy9TLA+Jv2inu2j2ph9NrTUMmCyIGjwEnyiCtUaUWnGlLR1hIlM6rKwpUX5qBiTuI02Du94aqx8zJhEsVI4IPduUZV+7vDC0CDv9GdeolUjObL18ckutqMKkQkc2kiFHOITLCwyiUp1bNUhuYRFrrxPoMzdDM/XbUf/gZvvYsozX+Cl5d5vh690afrk3+0hR4XyoxqYmQICaTSwjClI6cA3EIvhWi0QiIm6rRgaQh1ikfsMK43/xv8YWfASuUe6sBAIzqPmNwjb1nJdnP5PDbOpPgJMXjWhDAC4JgvEWUaQkoib/o/NzQb37S1fP0+Dt/6wHGKqe6v1yZvuG+zc69p3m7d4dnW8TjAaEdwmFKEcztkfSG67KVG346aeV8YEglincRYLQClVcdKsery6lI1VVNJbyF+jdp8gPG4E08mAAAAABJRU5ErkJggg==) !important;
  }
}
:root:has(#theme-Better-UniExtBtn[theme-better_uniextbtn-default="Custom"]) {
  #unified-extensions-button {
    list-style-image: var(--theme-better_uniextbtn-custom) !important;
  }
}

/* Name: Better Find Bar */
/* Description: Improves the find bar, making it floating with theme match and customization. */
/* Author: @RobotoSkunk */

:root {
	--better-findbar-transform-translateY: 150px;
	--better-findbar-transform-translateX: -50%;
	--better-findbar-position-top: auto;
	--better-findbar-position-bottom: 15px;
	--better-findbar-position-left: 50%;
	--better-findbar-position-right: auto;
	--better-findbar-background-color: var(--zen-primary-color);
}

/* Custom background */
@media (-moz-bool-pref: "theme-better_find_bar-enable_custom_background") {
	:root {
		--better-findbar-background-color: var(--theme-better_find_bar-custom_background);
	}
}

findbar {
	display: flex !important;

	border-radius: var(--zen-border-radius) !important;
	margin: 0px !important;

	width: 90% !important;
	max-width: calc(var(--theme-better_find_bar-textbox_width) * 1px); 

	height: auto !important;

	position: absolute !important;
	top: var(--better-findbar-position-top);
	bottom: var(--better-findbar-position-bottom);
	left: var(--better-findbar-position-left);
	right: var(--better-findbar-position-right);
	transform: translateX(var(--better-findbar-transform-translateX)) translateY(0);

	overflow: unset !important;
	box-shadow: var(--box-shadow-10);

	background: var(--better-findbar-background-color) !important;
	border: 1px solid var(--input-border-color) !important;

	transition: transform 0.35s ease !important;

	visibility: visible !important;
	opacity: 1 !important;

	& .findbar-container {
		flex-wrap: wrap;
		overflow-x: auto !important;
		height: auto !important;

		row-gap: 10px;

		& > :first-child {
			width: 100% !important;
		}

		& .findbar-textbox {
			flex-grow: 1;
		}
	}

	&[hidden] {
		transform: translateX(var(--better-findbar-transform-translateX)) translateY(var(--better-findbar-transform-translateY));
	}

	@starting-style {
		transform: translateX(var(--better-findbar-transform-translateX)) translateY(var(--better-findbar-transform-translateY));
	}
}

/* Disable animations */
@media (-moz-bool-pref: "theme.better_find_bar.instant_animations") {
	findbar, findbar .findbar-container {
		transition: initial !important;
	}
}

/* Horizontal Position */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-horizontal_position="left"]
	) {
	--better-findbar-transform-translateX: 0%;
	--better-findbar-position-left: 15px;
	--better-findbar-position-right: auto;
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-horizontal_position="right"]
	) {
	--better-findbar-transform-translateX: 0%;
	--better-findbar-position-left: auto;
	--better-findbar-position-right: 15px;
}

/* Vertical Position */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-vertical_position="top"]
	) {
	--better-findbar-transform-translateY: -150px;
	--better-findbar-position-bottom: auto;
	--better-findbar-position-top: 15px;
}


/* Background blur */
@media (-moz-bool-pref: "theme.better_find_bar.transparent_background") {
	findbar,
	findbar .findbar-textbox:not([status="notfound"]) {
		backdrop-filter: blur(8px);

		background: color-mix(in hsl, var(--better-findbar-background-color), transparent 10%) !important;
	}
}

/* Hide highlight checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_highlight="hide_immediately"]
	) {
	findbar .findbar-highlight {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_highlight="hide_on_disable"]
	) {
	findbar checkbox.findbar-highlight:not([checked]) {
		display: none !important;
	}
}

/* Hide match case checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_case="hide_immediately"]
	) {
	findbar .findbar-case-sensitive {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_case="hide_on_disable"]
	) {
	findbar checkbox.findbar-case-sensitive:not([checked]) {
		display: none !important;
	}
}

/* Hide match diacritics checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_diacritics="hide_immediately"]
	) {
	findbar .findbar-match-diacritics {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_match_diacritics="hide_on_disable"]
	) {
	findbar checkbox.findbar-match-diacritics:not([checked]) {
		display: none !important;
	}
}

/* Hide whole words checkbox */
body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_whole_words="hide_immediately"]
	) {
	findbar .findbar-entire-word {
		display: none !important;
	}
}

body:has(
		#theme-Better-Find-Bar[theme-better_find_bar-hide_whole_words="hide_on_disable"]
	) {
	findbar .findbar-entire-word:not([checked]) {
		display: none !important;
	}
}

/* Hide find status label */
@media (-moz-bool-pref: "theme.better_find_bar.hide_find_status") {
	findbar .findbar-find-status {
		display: none !important;
	}
}

/* Hide found matches label */
@media (-moz-bool-pref: "theme.better_find_bar.hide_found_matches") {
	findbar .findbar-label.found-matches {
		display: none !important;
	}
}

/* Name: Better Tab Indicators */
/* Description: This Zen Theme provides some alternative styling for the tabs on the sidebar. */
/* Author: @TheRealMG */
@media (-moz-bool-pref: "zen.tabs.vertical") {
  /* Tab Borders Based on Preference */
  .tabbrowser-tab:not([pinned]):is([multiselected="true"], [selected]) {
    &:has(#uc-tabs[uc-tabs-preferred_color="primary"]) .tab-background {
      border: 2px solid var(--zen-colors-primary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="secondary"]) .tab-background {
      border: 2px solid var(--zen-colors-secondary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="tertiary"]) .tab-background {
      border: 2px solid var(--zen-colors-tertiary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="border"]) .tab-background {
      border: 2px solid var(--zen-colors-border) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="custom"]) .tab-background {
      @media (prefers-color-scheme: light) {
        border: 2px solid var(--uc-tabs-preferred_color, #000000) !important; /* Fallback to black */
      }
      @media (prefers-color-scheme: dark) {
        border: 2px solid var(--uc-tabs-preferred_color, #ffffff) !important; /* Fallback to white */
      }
    }
  }

  /* Background Modification for Selected Tab */
  #tabbrowser-tabs {
    & .tabbrowser-tab {
      &[selected] .tab-background {
        background: color-mix(
          in srgb,
          var(--zen-colors-secondary) 40%,
          transparent
        ) !important;
      }
    }
  }

  /* Dimming Tab Text When Unloaded */
  @media (-moz-bool-pref: "uc.tabs.dim_unloaded") {
    #tabbrowser-tabs {
      & .tabbrowser-tab {
        @media (-moz-bool-pref: "zen.tabs.dim-pending") {
          &[pending="true"] .tab-text {
            opacity: 0.5; /* Dimmed text for pending tabs */
          }
        }
      }
    }
  }
}

/* Name: Better Letterboxing */
/* Description: More pleasant, theme-friendly, and most importantly, rounded letterboxing. */
/* Author: @qtchaos */
.browserContainer {
  background: linear-gradient(
    90deg,
    var(--zen-colors-secondary) 0%,
    var(--zen-colors-primary) 100%
  );
}

stack > browser {
  border-radius: 10px !important;
}

/* Name: SuperPins */
/* Description: This Zen Mod enhances pinned tabs/Essentials, by making some UI/UX changes. */
/* Author: @CosmoCreeper */
@media (-moz-bool-pref: "zen.tabs.vertical") {

    /* Prevents stuff from being clipped off from bottom of Essentials */
    #zen-essentials-container, .zen-essentials-container {
        overflow: visible !important;
    }

    /* Makes essentials transparent (when toggled) */
    :root:has(#theme-SuperPins[uc-essentials-color-scheme="transparent"]) {
        .tabbrowser-tab[zen-essential="true"]:not(:hover):not([selected="true"]) .tab-stack .tab-background {
            background-color: transparent !important;
        }
    }

    @media (-moz-bool-pref: "zen.view.sidebar-expanded") and (not (-moz-bool-pref: "zen.view.sidebar-expanded.on-hover")) {

        /* Default essentials-width and essentials-gap variables (set to browser default) to fix some bugs */
        :root {
            --essentials-width: 49px;
            --essentials-gap: calc(var(--zen-toolbox-padding) - 2px);
        }

        /* Set width of Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-width="Thin"]) {
            --essentials-width: 50px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Normal"]) {
            --essentials-width: 60px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Wide"]) {
            --essentials-width: 70px;
        }

        :root:has(#theme-SuperPins[uc-essentials-width="Thin"],
            #theme-SuperPins[uc-essentials-width="Normal"],
            #theme-SuperPins[uc-essentials-width="Wide"]) {
            #zen-essentials-container, .zen-essentials-container {
                grid-template-columns: repeat(auto-fit,
                        minmax(var(--essentials-width), auto)) !important;
            }

            .zen-essentials-container {
                max-width: calc(100% - var(--zen-toolbox-padding) * 2);
            }

            @media (-moz-bool-pref: "uc.essentials.grid-count") {
                #zen-essentials-container, .zen-essentials-container {
                    grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
                }
            }
        }

        /* Set margin between Essentials (Dropdown) */
        :root:has(#theme-SuperPins[uc-essentials-gap="Small"]) {
            --essentials-gap: 0px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Normal"]) {
            --essentials-gap: 2px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Big"]) {
            --essentials-gap: 5px;
        }

        :root:has(#theme-SuperPins[uc-essentials-gap="Small"],
            #theme-SuperPins[uc-essentials-gap="Normal"],
            #theme-SuperPins[uc-essentials-gap="Big"]) {
            #zen-essentials-container, .zen-essentials-container {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-tabs-show-separator="never"]) {
        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            display: none !important;
        }

        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                padding-bottom: 5px !important;
            }
        }
    }

    /* Enables legacy layout for pinned tabs (icon only in grid) */
    @media (-moz-bool-pref: "uc.pins.legacy-layout") {
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #tabbrowser-tabs {
                & .tabbrowser-tab {
                    &[zen-pinned-changed="true"]:not([zen-essential])
                    > .tab-stack
                    > .tab-content
                    > .tab-icon-stack {
                    position: unset !important;
                    top: unset !important;
                    }
                }
            }
        }

        #vertical-pinned-tabs-container, .zen-workspace-pinned-tabs-section {
            .tabbrowser-tab[pinned]  {
                .tab-close-button, .tab-reset-button,
                .tab-reset-pin-button, .tab-label-container {
                    display: none !important;
                }
            }
        }

        /*disable icon shift when tab was renamed*/
        #navigator-toolbox[zen-sidebar-expanded="true"] {
            & #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            & .zen-workspace-pinned-tabs-section {
                & .tabbrowser-tab>.tab-stack>.tab-content>.tab-icon-stack {
                    left: unset !important;
                }
            }
        }

        /* Make pinned tabs auto-grow to span full width of row */
        @media (-moz-bool-pref: "uc.pins.auto-grow") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                display: flex !important;
                flex-wrap: wrap !important;
                flex-direction: row !important;

                &>.tabbrowser-tab {
                    width: auto !important;
                    min-width: var(--tab-pinned-min-width-expanded) !important;
                    flex: 1 1 auto !important;
                }

                &>tab-group {
                    width: 100% !important;
                }
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                /* Logic for pinned tabs that have auto-grow and grid-count. Must use +1 to fix */
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    &>.tabbrowser-tab {
                        width: calc(100% / (var(--mod-superpins-pins-grid-count) + 1)) !important;
                    }
                }
            }
        }

        @media (not (-moz-bool-pref: "uc.pins.auto-grow")) {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(auto-fit, minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                display: grid !important;
            }

            @media (-moz-bool-pref: "uc.pins.grid-count") {
                #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
                .zen-workspace-pinned-tabs-section {
                    grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--tab-pinned-min-width-expanded), auto)) !important;
                }
            }
        }

        /*The actual grid layout*/
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            &:has(> :nth-child(2)) {
                margin: 0 var(--zen-toolbox-padding) !important;
                padding: 0 var(--zen-toolbox-padding) !important;
                overflow: visible !important;
                padding-bottom: 17px !important;
                gap: 3px 3px !important;
                max-width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
            }

            .tabbrowser-tab {
                --toolbarbutton-inner-padding: 0;
            }

            &>*:not(tab-group) {
                margin: 0 !important;
            }

            &>tab-group .tab-icon-stack {
                margin: auto !important;
            }
        }

        .zen-workspace-pinned-tabs-section {
            position: relative !important;

            .tab-icon-stack {
                margin-left: 50% !important;
                transform: translateX(-50%) !important;
            }
        }

        .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
            position: absolute !important;
            bottom: 7px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: calc(100% - var(--zen-toolbox-padding) * 2) !important;
        }

        @media (-moz-bool-pref: "arcline.superpin") {
            .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                bottom: -4px !important;
            }
        }
    }

    /* Make Essentials look more box like */
    @media (-moz-bool-pref: "uc.essentials.box-like-corners") {
        .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
            border-radius: 5px !important;
        }
    }

    /* If Essentials have a grid count but do not have auto-grow on */
    @media (-moz-bool-pref: "uc.essentials.grid-count") {
        #zen-essentials-container, .zen-essentials-container {
            grid-template-columns: repeat(var(--mod-superpins-essentials-grid-count), minmax(var(--essentials-width), auto)) !important;
        }
    }

    /* Make Essentials auto-grow to span full width of a row */
    @media (-moz-bool-pref: "uc.essentials.auto-grow") {
        .tabbrowser-tab[zen-essential="true"] {
            width: auto !important;
            min-width: var(--essentials-width) !important;
            flex: 1 1 auto !important;
        }

        @media (-moz-bool-pref: "uc.essentials.grid-count") {

            /* For auto-grow with grid-count. must use +1 to fix a bug */
            .tabbrowser-tab[zen-essential="true"] {
                width: calc(100% / (var(--mod-superpins-essentials-grid-count) + 1)) !important;
            }
        }

        #zen-essentials-container, .zen-essentials-container {
            display: flex !important;
            flex-wrap: wrap !important;
            flex-direction: row !important;
            width: 100% !important;
        }

        #navigator-toolbox {
            min-width: min-content !important;
        }
    }

    /* Puts Essentials at the bottom */
    :root:has(#theme-SuperPins[uc-essentials-position="bottom"]) {
        #tabbrowser-arrowscrollbox {
            position: relative !important;
            overflow-x: hidden !important;
        }
        
        .zen-essentials-container {
            position: relative !important;
            margin-top: auto !important;
            padding-top: 8px !important;
        }

        /* Adds padding-bottom only when media controls are visible */
        #zen-media-controls-toolbar:not([hidden]) ~ .zen-essentials-container {
            padding-bottom: 10px !important;
        }
        
        #zen-essentials-container, #zen-essentials {
            order: 999 !important;
        }

        #tabbrowser-arrowscrollbox > zen-workspace {
            width: 100% !important;
            padding-top: 0 !important;
        }

        #navigator-toolbox[zen-sidebar-expanded="true"] {
            .zen-essentials-container {
                min-width: 100% !important;
                width: 100% !important;
            }
        }
    }

    /* Adds a little bg to the pinned tabs */
    @media (-moz-bool-pref: "uc.pins.bg") {
        @media (prefers-color-scheme: light) {
            :root {
                --pins-bg-percentage: 40%;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --pins-bg-percentage: 7%;
            }
        }

        /* background color of pinned tabs in a normal state (not hovered/selected) */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background {
            background-color: color-mix(in srgb, white var(--pins-bg-percentage), transparent) !important;
        }

        /* background color when hovering */
        .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 3%), transparent) !important;
        }

        /* background color when selected */
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"] .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"] .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 16%), transparent) !important;
        }

        /* background color when selected and hovering*/
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[selected="true"]:hover .tab-stack .tab-background,
        .tabbrowser-tab[pinned]:not([zen-essential="true"])[multiselected="true"]:hover .tab-stack .tab-background {
            background-color: color-mix(in srgb, white calc(var(--pins-bg-percentage) + 18%), transparent) !important;
        }
    }

    /* Adds border to Pins/Essentials (when toggled) */
    :root:has(#theme-SuperPins[uc-superpins-border="essentials"]) {
        #zen-essentials-container, .zen-essentials-container {
            & .tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
                border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                        color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
            }
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="pins"]) {
        .tabbrowser-tab[pinned]:not([zen-essential="true"]) .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-superpins-border="both"]) {
        .tabbrowser-tab[pinned] .tab-stack .tab-background,
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section tab-group,
        .zen-workspace-pinned-tabs-section tab-group {
            border: 1px solid light-dark(color-mix(in srgb, var(--zen-colors-secondary) 80%, black),
                    color-mix(in srgb, var(--zen-colors-secondary) 80%, white)) !important;
        }
    }

    /* Let pinned tabs have the same selected styling as essentials */
    @media (-moz-bool-pref: "uc.pins.essentials-layout") {

        /* Specific query to overwrite previous one */
        #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
        .zen-workspace-pinned-tabs-section {
            grid-template-columns: repeat(auto-fit, minmax(var(--essentials-width), auto)) !important;

            &:has(> :nth-child(2)) {
                gap: var(--essentials-gap) var(--essentials-gap) !important;
            }

            &>.tabbrowser-tab {
                min-width: var(--essentials-width) !important;
            }
        }

        @media (-moz-bool-pref: "uc.pins.grid-count") {
            #vertical-pinned-tabs-container>.zen-workspace-tabs-section,
            .zen-workspace-pinned-tabs-section {
                grid-template-columns: repeat(var(auto-fit, --mod-superpins-pins-grid-count), minmax(var(--essentials-width), auto)) !important;
            }
        }
    }

    /* pins height */
    :root {
        --pins-height: var(--tab-min-height);
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]) {
        --pins-height: 40px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="normal"]) {
        --pins-height: 50px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        --pins-height: 60px;
    }

    :root:has(#theme-SuperPins[uc-pinned-height="small"]),
    :root:has(#theme-SuperPins[uc-pinned-height="normal"]),
    :root:has(#theme-SuperPins[uc-pinned-height="large"]) {
        .zen-workspace-pinned-tabs-section .tabbrowser-tab {
            height: var(--pins-height) !important;
        }
    }

    @media (-moz-bool-pref: "uc.essentials.same-height") {
        .tabbrowser-tab[zen-essential] {
            height: var(--pins-height) !important;
        }

        .tabbrowser-tab[zen-essential] .tab-background {
            min-height: var(--pins-height) !important;
        }
    }

    /* favicon size */
    :root:has(#theme-SuperPins[uc-favicon-size="small"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 16px !important;
            width: 16px !important;
        }

        /* No need to scale tab throbber as it is same size. */
    }

    :root:has(#theme-SuperPins[uc-favicon-size="normal"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 18px !important;
            width: 18px !important;
        }

        .tab-throbber {
            transform: scale(1.125) !important;
        }
    }

    :root:has(#theme-SuperPins[uc-favicon-size="large"]) {

        .tab-icon-pending,
        .tab-icon-image,
        .tab-sharing-icon-overlay,
        .tab-icon-overlay {
            height: 20px !important;
            width: 20px !important;
        }

        .tab-throbber {
            transform: scale(1.25) !important;
        }
    }

    /* workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-icon-size="x-small"]) {
        #zen-workspaces-button {
            font-size: x-small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="small"]) {
        #zen-workspaces-button {
            font-size: small !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="medium"]) {
        #zen-workspaces-button {
            font-size: medium !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-icon-size="large"]) {
        #zen-workspaces-button {
            font-size: large !important;
        }
    }

    /* current workspace icons size */
    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="small"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 12px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="normal"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 14.5px !important;
        }
    }

    :root:has(#theme-SuperPins[uc-workspace-current-icon-size="large"]) {
        .zen-current-workspace-indicator .zen-current-workspace-indicator-icon {
            font-size: 16px !important;
        }
    }

    /* Increase margin below Essentials in case the workspace indicator is not visible. */
    @media (not (-moz-bool-pref: "zen.workspaces.show-workspace-indicator")) {
        .zen-current-workspace-indicator {
            display: none !important;
        }

        .zen-essentials-container {
            padding-bottom: 5px;
        }

        :root:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"]) {
            zen-workspace[active="true"]:has(.zen-workspace-pinned-tabs-section .tabbrowser-tab) {
                &:has(~ #zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container .zen-workspace-tabs-section[active="true"] .tabbrowser-tab) {
                    margin-top: 6px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    min-height: 20px !important;
                }
            }

            #zen-essentials-container, .zen-essentials-container {
                &:has(> :nth-child(1))~#zen-tabs-wrapper #zen-browser-tabs-container #vertical-pinned-tabs-container>.zen-workspace-tabs-section {
                    .vertical-pinned-tabs-container-separator, .pinned-tabs-container-separator {
                        max-height: unset !important;
                    }
                }
            }
        }

        :root:not(:has(#theme-SuperPins[uc-tabs-show-separator="essentials-shown"])) {
            #tabbrowser-tabs:has(.zen-essentials-container) #zen-tabs-wrapper {
                margin-top: 6px !important;
            }
        }
    }

    /* Ensure that the browser uses SuperPins dim rather than the built-in dim-pending. */
    .tab-icon-image[pending="true"],
    .tabbrowser-tab[pending="true"] .tab-text {
        opacity: 1 !important;
    }

    /* If dim-type is set to icons. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="icons"]) {
        .tab-icon-image[pending="true"] {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="text"]) {
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    /* If dim-type is set to icon + text. */
    :root:has(#theme-SuperPins[uc-tabs-dim-type="both"]) {

        .tab-icon-image[pending="true"],
        .tabbrowser-tab[pending="true"] .tab-text {
            opacity: 0.5 !important;
        }
    }

    @media (-moz-bool-pref: "uc.tabs.strikethrough-on-pending") {
        .tabbrowser-tab[pending="true"] .tab-text {
            text-decoration: line-through !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.stay-at-top") {
        zen-workspace > arrowscrollbox.workspace-arrowscrollbox {
            overflow-y: hidden !important;
            flex-basis: 100%;
        }

        #tabbrowser-arrowscrollbox .zen-workspace-pinned-tabs-section {
            flex: 0 1 0;
        }
        
        #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            flex: 1 1 0;
            overflow-y: auto !important;
        }
    }

    @media (-moz-bool-pref: "uc.pins.active-bg") {
        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"] .tab-stack .tab-background {
            background-color: var(--mod-superpins-pins-active-bg) !important;
            opacity: 1 !important;
        }

        .zen-workspace-tabs-section .tabbrowser-tab[pinned][selected="true"]:hover .tab-stack .tab-background {
            opacity: 0.8 !important;
            background-color: var(--mod-superpins-pins-active-bg) !important;
        }
    }

    @media (-moz-bool-pref: "zen.workspaces.indicator-name-center") {
        .zen-current-workspace-indicator-name {
            position: absolute;
            left: 0;
            text-align: center;
            width: 100%;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="top"]) {
        .zen-current-workspace-indicator {
            top: 0;
        }

        .zen-essentials-container {
            margin-top: 48px;
        }

        .workspace-arrowscrollbox {
            margin-top: 50px;
        }

        zen-workspace {
            padding-top: 0 !important;
        }
    }

    :root:has(#theme-SuperPins[zen-workspaces-indicator-position="bottom"]) {
        .zen-current-workspace-indicator {
            position: fixed !important;
            bottom: 0;
            z-index: 200;
        }

        zen-workspace {
            margin-top: 2px;
        }
    }

    @media (-moz-bool-pref: "uc.remove-sidebar-scrollbar") {
        scrollbox:nth-child(5), #tabbrowser-arrowscrollbox .zen-workspace-normal-tabs-section {
            scrollbar-width: none !important;
        }
    }
}

/* End of Zen Mods */
